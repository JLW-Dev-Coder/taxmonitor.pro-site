{
  "clickupProjection": [],
  "contract": {
    "authority": ["R2 Canonical"],
    "governs": "Webhook — Stripe — payment_intent.succeeded",
    "path": "app/contracts/webhooks/stripe.payment_intent_succeeded.contract.json",
    "source": "Tax Monitor Pro",
    "title": "Tax Monitor Pro — Webhook Contract — Stripe — payment_intent.succeeded",
    "validation": {
      "enumStrict": true,
      "normalizeCheckboxToBoolean": true,
      "rejectUnknownValues": true
    },
    "version": 1
  },
  "delivery": {
    "dedupeKey": "payload.data.object.id",
    "endpoint": "/stripe/webhook",
    "eventType": "payment_intent.succeeded",
    "method": "POST",
    "receiptKeyPattern": "receipts/{source}/{eventId}.json",
    "receiptSource": "stripe",
    "signature": {
      "header": "Stripe-Signature",
      "required": true,
      "secretEnvVar": "STRIPE_WEBHOOK_SECRET"
    },
    "writes": []
  },
  "effects": {
    "note": "Receipt only. No lifecycle advancement required."
  },
  "payload": {
    "additionalProperties": true,
    "properties": {
      "created": {
        "type": "number"
      },
      "data": {
        "type": "object",
        "additionalProperties": true,
        "properties": {
          "object": {
            "type": "object",
            "additionalProperties": true,
            "properties": {
              "amount": {
                "type": "number"
              },
              "amount_received": {
                "type": ["number", "null"]
              },
              "created": {
                "type": "number"
              },
              "currency": {
                "type": "string",
                "minLength": 3
              },
              "id": {
                "type": "string",
                "minLength": 8
              },
              "metadata": {
                "type": "object",
                "additionalProperties": true
              },
              "status": {
                "type": "string",
                "enum": ["succeeded"]
              }
            },
            "required": ["amount", "created", "currency", "id", "status"]
          }
        },
        "required": ["object"]
      },
      "id": {
        "type": "string",
        "minLength": 8
      },
      "type": {
        "type": "string",
        "enum": ["payment_intent.succeeded"]
      }
    },
    "required": ["created", "data", "id", "type"],
    "type": "object"
  },
  "schema": {
    "name": "tm_webhook_stripe_payment_intent_succeeded",
    "version": 1
  }
}